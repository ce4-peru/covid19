ggplot(df_dep, aes(x=Fecha)) +
geom_line( mapping = aes(CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(df_dep, aes(x=Fecha)) +
geom_line( mapping = aes(CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(colour=group)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(colour=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
df_95ci <- data.frame(y_values=c(-1,1)*qnorm(0.95))
df_99ci <- data.frame(y_values=c(-1,1)*qnorm(0.99))
View(df_95ci)
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="blue") +
geom_text(data=d, mapping=aes(x=Fecha, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="blue") +
geom_text(data=d, mapping=aes(x=Fecha, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot()+
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="blue") +
geom_text(data=d, mapping=aes(x=Fecha, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
# geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
View(df_dep)
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date), color="blue") +
# geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m"))
p<-ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m"))
ggplotly(p)
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_label(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m"))
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
bbc_style()
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m")) +
aes_distinct()
-ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m"))
ggplot(data = df_dep, aes(x=Fecha,y = CASOS)) +
geom_line( mapping = aes(y = CASOS,colour=REGION,group=REGION)) +
scale_colour_manual(values=pal1)+
theme(panel.background = element_rect(fill = "white"),
legend.position = "right",
legend.justification = c("right","top"))+
# theme(axis.text.x = element_text(angle=90),
#       )+
labs(title="SARS-CoV2 en Perú", y="Casos por región",
x="Fecha", caption="Source :varios")+
scale_x_date(labels = date_format("%d-%m"))+
# scale_y_continuous(name="", breaks=NA, limits=c(0,1)) +
geom_vline(data=d, mapping=aes(xintercept=date,label=event), color="blue") +
# geom_text(data=d, mapping=aes(x=date, label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
scale_x_date(labels = date_format("%d-%m"))
library(dplyr)
library(data.table)
dat <- rio::import("https://github.com/jincio/COVID_19_PERU/blob/master/docs/reportes_minsa.xlsx?raw=true")
dat1 <- dat %>%
mutate(pos_new = Positivos-lag(Positivos,default = 0),
des_new = Descartados-lag(Descartados,default = 0)) %>%
group_by(Dia) %>%
summarise(pos_new = sum(pos_new), des_new = sum(des_new)) %>%
mutate(cum_pos = cumsum(pos_new),
tot_pruebas = pos_new+des_new)
dat2 <- dat1 %>%
mutate(neg_new = tot_pruebas-pos_new) %>%
dplyr::select(Dia, pos_new, neg_new) %>%
rename(Positivo = pos_new, Negativo = neg_new) %>%
gather(res, count, -Dia) %>%
uncount(count)
f2 <- dat2_acumulado %>%
ggplot(aes(x = Fecha, fill = res)) +
geom_bar(position = "fill") +
stat_fill_labels(size=2) +
scale_fill_discrete_sequential(palette="BluGrn") +
labs(y = "proportion", fill = "Resultado",
title = paste0("Proporcion de positivos del total \nde muestras analizadas hasta: ", Sys.Date())) +
theme_bw() +
theme(legend.position="bottom")
dat_acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200414_CA_clean.csv")
dat_acumulado<-dat_acumulado %>%
mutate(Fecha = as.Date(FECHA))
dat1_acumulado <- dat_acumulado %>%
mutate(pos_new = TOTAL_POSITIVOS-lag(TOTAL_POSITIVOS,default = 0),
des_new = TOTAL_DESCARTADOS-lag(TOTAL_DESCARTADOS,default = 0),
tot_pruebas = pos_new+des_new)
dat1_acumulado<-dat1_acumulado%>%group_by(Fecha) %>%
summarise(pos_new = sum(pos_new), des_new = sum(des_new)) %>%
mutate(cum_pos = cumsum(pos_new),
tot_pruebas = pos_new+des_new)
dat2_acumulado <- dat1_acumulado %>%
mutate(neg_new = tot_pruebas-pos_new) %>%
dplyr::select(Fecha, pos_new, neg_new)
setnames(dat2_acumulado,old = "pos_new",new = "Positivo")
setnames(dat2_acumulado,old = "neg_new",new = "Negativo")
f2 <- dat2_acumulado %>%
ggplot(aes(x = Fecha, fill = res)) +
geom_bar(position = "fill") +
stat_fill_labels(size=2) +
scale_fill_discrete_sequential(palette="BluGrn") +
labs(y = "proportion", fill = "Resultado",
title = paste0("Proporcion de positivos del total \nde muestras analizadas hasta: ", Sys.Date())) +
theme_bw() +
theme(legend.position="bottom")
library(ggplot2)
f2 <- dat2_acumulado %>%
ggplot(aes(x = Fecha, fill = res)) +
geom_bar(position = "fill") +
stat_fill_labels(size=2) +
scale_fill_discrete_sequential(palette="BluGrn") +
labs(y = "proportion", fill = "Resultado",
title = paste0("Proporcion de positivos del total \nde muestras analizadas hasta: ", Sys.Date())) +
theme_bw() +
theme(legend.position="bottom")
library(cowplot)
library(JLutils)
f2 <- dat2_acumulado %>%
ggplot(aes(x = Fecha, fill = res)) +
geom_bar(position = "fill") +
stat_fill_labels(size=2) +
scale_fill_discrete_sequential(palette="BluGrn") +
labs(y = "proportion", fill = "Resultado",
title = paste0("Proporcion de positivos del total \nde muestras analizadas hasta: ", Sys.Date())) +
theme_bw() +
theme(legend.position="bottom")
library(colorspace)
f2 <- dat2_acumulado %>%
ggplot(aes(x = Fecha, fill = res)) +
geom_bar(position = "fill") +
stat_fill_labels(size=2) +
scale_fill_discrete_sequential(palette="BluGrn") +
labs(y = "proportion", fill = "Resultado",
title = paste0("Proporcion de positivos del total \nde muestras analizadas hasta: ", Sys.Date())) +
theme_bw() +
theme(legend.position="bottom")
f2
dat <- rio::import("https://github.com/jincio/COVID_19_PERU/blob/master/docs/reportes_minsa.xlsx?raw=true")
dat <- rio::import("https://github.com/jincio/COVID_19_PERU/blob/master/docs/reportes_minsa.xlsx?raw=true")
dat1 <- dat %>%
mutate(pos_new = Positivos-lag(Positivos,default = 0),
des_new = Descartados-lag(Descartados,default = 0)) %>%
group_by(Dia) %>%
summarise(pos_new = sum(pos_new), des_new = sum(des_new)) %>%
mutate(cum_pos = cumsum(pos_new),
tot_pruebas = pos_new+des_new)
dat2 <- dat1 %>%
mutate(neg_new = tot_pruebas-pos_new) %>%
dplyr::select(Dia, pos_new, neg_new) %>%
rename(Positivo = pos_new, Negativo = neg_new) %>%
gather(res, count, -Dia) %>%
uncount(count)
View(dat2_acumulado)
library(data.table)
library(dplyr)
library(ggplot2)
library(directlabels)
library(reshape)
library(colorspace)
library(plotly)
library(ggplot2)
library(JLutils)
library(bbplot)
library(scales)
library("gridExtra")
library(cowplot)
dat_acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200414_CA_clean.csv")
dat_acumulado<-dat_acumulado %>%
mutate(Fecha = as.Date(FECHA))
dat1_acumulado <- dat_acumulado %>%
mutate(pos_new = TOTAL_POSITIVOS-lag(TOTAL_POSITIVOS,default = 0),
des_new = TOTAL_DESCARTADOS-lag(TOTAL_DESCARTADOS,default = 0),
tot_pruebas = pos_new+des_new)
#### sumarizando por FECHA pero asegurate que lees primero
## el paquete dyplyr y despues tydir si no no funciona
dat1_acumulado<-dat1_acumulado%>%group_by(Fecha) %>%
summarise(pos_new = sum(pos_new), des_new = sum(des_new)) %>%
mutate(cum_pos = cumsum(pos_new),
tot_pruebas = pos_new+des_new)
d=data.frame(Fecha=as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")), event=c(" Primer Caso", " Cierre colegios", "Cierre universidades", " Inicio de cuarentena", " Extensión cuarentena", " Restricción por sexo","Toque de queda 18pm-5am","Extensión cuarentena"))
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200414_CA_clean.csv")
library(data.table)
library(dplyr)
d=data.frame(Fecha=as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")), event=c(" Primer Caso", " Cierre colegios", "Cierre universidades", " Inicio de cuarentena", " Extensión cuarentena", " Restricción por sexo","Toque de queda 18pm-5am","Extensión cuarentena"))
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200413_CA_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200414_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
acumulado1<-acumulado1 %>%
mutate(Fecha = as.Date(FECHA))
setwd("~/covid19/outputs_covid19/")
#
png(filename="20200414_pruebas_vs_positivos_COVID19.png", width=1100, height=600)
p<-ggplot() +
geom_line(data = acumulado1, aes(Fecha, value, colour=variable,group=variable),alpha =1.6) +
scale_colour_manual(values=c("red", "blue"))+
scale_x_date(labels = date_format("%d-%b"),breaks = as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")),
minor_breaks = NULL)+
# scale_x_date() +
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="gray") +
geom_text(data=d, mapping=aes(x=Fecha, y =0,label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
# theme_minimal()+
theme(panel.background = element_rect(fill = "white"),
legend.position = c(0.35,0.95),
legend.justification = c("right","top"),
axis.text.x = element_text(vjust =0.60,angle=60,face = "bold.italic", size = 10),)+
labs(title="SARS-CoV-2 en Perú", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
theme(plot.title = element_text(face = "bold.italic",size = 5) )+
bbc_style()
library(ggplot2)
png(filename="20200414_pruebas_vs_positivos_COVID19.png", width=1100, height=600)
p<-ggplot() +
geom_line(data = acumulado1, aes(Fecha, value, colour=variable,group=variable),alpha =1.6) +
scale_colour_manual(values=c("red", "blue"))+
scale_x_date(labels = date_format("%d-%b"),breaks = as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")),
minor_breaks = NULL)+
# scale_x_date() +
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="gray") +
geom_text(data=d, mapping=aes(x=Fecha, y =0,label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
# theme_minimal()+
theme(panel.background = element_rect(fill = "white"),
legend.position = c(0.35,0.95),
legend.justification = c("right","top"),
axis.text.x = element_text(vjust =0.60,angle=60,face = "bold.italic", size = 10),)+
labs(title="SARS-CoV-2 en Perú", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
theme(plot.title = element_text(face = "bold.italic",size = 5) )+
bbc_style()
library(lubridate)
setwd("~/covid19/outputs_covid19/")
#
png(filename="2020041clau_pruebas_vs_positivos_COVID19.png", width=1100, height=600)
p<-ggplot() +
geom_line(data = acumulado1, aes(Fecha, value, colour=variable,group=variable),alpha =1.6) +
scale_colour_manual(values=c("red", "blue"))+
scale_x_date(labels = date_format("%d-%b"),breaks = as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")),
minor_breaks = NULL)+
# scale_x_date() +
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="gray") +
geom_text(data=d, mapping=aes(x=Fecha, y =0,label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
# theme_minimal()+
theme(panel.background = element_rect(fill = "white"),
legend.position = c(0.35,0.95),
legend.justification = c("right","top"),
axis.text.x = element_text(vjust =0.60,angle=60,face = "bold.italic", size = 10),)+
labs(title="SARS-CoV-2 en Perú", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
theme(plot.title = element_text(face = "bold.italic",size = 5) )+
bbc_style()
dev.off()
ggplot() +
geom_line(data = acumulado1, aes(Fecha, value, colour=variable,group=variable),alpha =1.6) +
scale_colour_manual(values=c("red", "blue"))+
scale_x_date(labels = date_format("%d-%b"),breaks = as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")),
minor_breaks = NULL)+
# scale_x_date() +
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="gray") +
geom_text(data=d, mapping=aes(x=Fecha, y =0,label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
# theme_minimal()+
theme(panel.background = element_rect(fill = "white"),
legend.position = c(0.35,0.95),
legend.justification = c("right","top"),
axis.text.x = element_text(vjust =0.60,angle=60,face = "bold.italic", size = 10),)+
labs(title="SARS-CoV-2 en Perú", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
theme(plot.title = element_text(face = "bold.italic",size = 5) )+
bbc_style()
dev.off()
png(filename="2020041clau_pruebas_vs_positivos_COVID19.png", width=1100, height=600)
ggplot() +
geom_line(data = acumulado1, aes(Fecha, value, colour=variable,group=variable),alpha =1.6) +
scale_colour_manual(values=c("red", "blue"))+
scale_x_date(labels = date_format("%d-%b"),breaks = as.Date(c("2020-03-06", "2020-03-11", "2020-03-12", "2020-03-15", "2020-03-26","2020-03-31","2020-04-02","2020-04-07")),
minor_breaks = NULL)+
# scale_x_date() +
geom_vline(data=d, mapping=aes(xintercept=Fecha), color="gray") +
geom_text(data=d, mapping=aes(x=Fecha, y =0,label=event), size=4, angle=90, vjust=-0.4, hjust=0)+
# theme_minimal()+
theme(panel.background = element_rect(fill = "white"),
legend.position = c(0.35,0.95),
legend.justification = c("right","top"),
axis.text.x = element_text(vjust =0.60,angle=60,face = "bold.italic", size = 10),)+
labs(title="SARS-CoV-2 en Perú", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
theme(plot.title = element_text(face = "bold.italic",size = 5) )+
bbc_style()
library(scales)
library(bbplot)
library(cowplot)
