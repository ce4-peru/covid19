# [10] "AISLADODOMICILS1N0"   "CONTACTO"             "IMPORTADO"
# [13] "ORIGEN_INTERNACIONAL" "CASO_CONTACTO"        "RELACION_CONTACTO"
# [16] "ORIGEN_NACIONAL"      "ENLACES1"             "ENLACES2"
# [19] "ENLACES3"             "OBSERVACIONES"        "DIA"
# [22] "MES"                  "ANO"
covid_ind <- covid_ind[,c(1, 2, 21:23, 3:20)]
str(covid_ind$CASO_ID) # int
unique(covid_ind$CASO_ID)
### Para manejo nuestro, completar n[umero de casos en google spreadsheet.
## Fecha
str(covid_ind$FECHA) # date
unique(covid_ind$FECHA)
## Region
str(covid_ind$REGION) # character
# Cambiar nombre de variable en googlesheet
unique(covid_ind$REGION)
# Cambiar Huanuco
levels(covid_ind$REGION) <- c(levels(covid_ind$REGION),
c("APURIMAC", "HUANUCO",
"JUNIN", "SAN MARTIN"))
covid_ind$REGION[covid_ind$REGION == "HUÃ¡NUCO"] <- "HUANUCO"
covid_ind$REGION[covid_ind$REGION == "HUÃNUCO"] <- "HUANUCO"
covid_ind$REGION[covid_ind$REGION == ""] <- NA
unique(covid_ind$REGION) # ok
## Provincia
str(covid_ind$PROVINCIA) # chr
unique(covid_ind$PROVINCIA)
levels(covid_ind$PROVINCIA) <- c(levels(covid_ind$PROVINCIA),
c("APURIMAC", "HUANUCO",
"JUNIN", "SAN MARTIN", "FERRENAFE"))
covid_ind$PROVINCIA[covid_ind$PROVINCIA == "FERREÃ±AFE"] <- "FERRENAFE"
covid_ind$PROVINCIA[covid_ind$PROVINCIA == ""] <- NA
unique(covid_ind$PROVINCIA)
## Distrito
str(covid_ind$DISTRITO) # chr
unique(covid_ind$DISTRITO)
covid_ind$DISTRITO[covid_ind$DISTRITO == "FERREÃ±AFE"] <- "FERRENAFE"
covid_ind$DISTRITO[covid_ind$DISTRITO == "NEPEÃ±A"] <- "NEPENA"
covid_ind$DISTRITO[covid_ind$DISTRITO == "OCOÃ±A"] <- "OCONA"
covid_ind$DISTRITO[covid_ind$DISTRITO == ""] <- NA
unique(covid_ind$DISTRITO)
## Direccion
str(covid_ind$DIRECCION) # logi
unique(covid_ind$DIRECCION) # NA
# Todos NAs
# [1] NA 50
## Edad
str(covid_ind$EDAD_A) # chr
covid_ind$EDAD_A_n <- as.numeric(covid_ind$EDAD_A)
str(covid_ind$EDAD_A_n)# ok
table(covid_ind$EDAD_A_n) # ok, from 2 to 96.
covid_ind$EDAD_A[covid_ind$EDAD_A == ""] <- NA
## Sexo
str(covid_ind$SEXOM1H0) # int
table(covid_ind$SEXOM1H0) # 0 and 1
## Hospitalizado
str(covid_ind$HOSPITALIZADOS1N0) # int
table(covid_ind$HOSPITALIZADOS1N0) # 0 and 1
## AisladoDomicil
str(covid_ind$AISLADODOMICILS1N0) # int
table(covid_ind$AISLADODOMICILS1N0) # 0 and 1
str(covid_ind$CONTACTO) # chr
unique(covid_ind$CONTACTO)
# Dividir en 3 o 4 columnas esta inforamci[on como se indic[o en el googlesheet.
covid_ind$CONTACTO[covid_ind$CONTACTO == ""] <- NA
## IMPORTADO
str(covid_ind$IMPORTADO) # int
unique(covid_ind$IMPORTADO)
# [1] "1"    "0"    NA
covid_ind$IMPORTADO[covid_ind$IMPORTADO == "LINK"] <- NA
covid_ind$IMPORTADO[covid_ind$IMPORTADO == ""] <- NA
## ORIGEN_INTERNACIONAL
str(covid_ind$ORIGEN_INTERNACIONAL) # chr
unique(covid_ind$ORIGEN_INTERNACIONAL)
# [1] "EUROPA"        ""              "UK"            "ESPANA"
# [5] "ITALIA"        "WASHINGTON DC" "EEUU"          "HOLANDA"
# [9] "ALEMANIA"      "ECUADOR"       "FRANCIA"       "EN RESERVA"
# [13] "COLOMBIA"      "MEXICO"        "SUDAMERICA"    "CARIBE"
# [17] "CHINA"         "CHILE"
# # Hay ""
covid_ind$ORIGEN_INTERNACIONAL[covid_ind$ORIGEN_INTERNACIONAL == ""] <- NA
unique(covid_ind$ORIGEN_INTERNACIONAL)
covid_ind$ORIGEN_INTERNACIONAL[covid_ind$ORIGEN_INTERNACIONAL == "LINK 2"] <- NA
## CASO_CONTACTO
str(covid_ind$CASO_CONTACTO) # int
unique(covid_ind$CASO_CONTACTO)
## RELACION_CONTACTO
str(covid_ind$RELACION_CONTACTO) # chr
unique(covid_ind$RELACION_CONTACTO)
# [1] NA            "FAMILIAR"    "AMIGO"       ""            "TURISTA"
# [6] "RELACIONADO" "COMUNITARIO"
# Hay ""
covid_ind$RELACION_CONTACTO[covid_ind$RELACION_CONTACTO == ""] <- NA
## ORIGEN_NACIONAL
str(covid_ind$ORIGEN_NACIONAL) # chr
unique(covid_ind$ORIGEN_NACIONAL)
# [1] "LIMA"                 "AREQUIPA"             "HUANUCO"
# [4] "CHINCHA"              ""                     "CUSCO"
# [7] "NUEVO CHIMBOTE"       "HUANCHACO"            "LA VICTORIA"
# [10] "PIURA"                "CHICLAYO"             "IQUITOS"
# [13] "TRUJILLO"             "TAMBOPATA"            "LA BANDA DE SHILCAYO"
# [16] "SANTA"
# Hay ""
covid_ind$ORIGEN_NACIONAL[covid_ind$ORIGEN_NACIONAL == ""] <- NA
## Double check "" and count NAs
unique(covid_ind$CASO_ID)
sum(is.na(covid_ind$CASO_ID)) # 6804 NAs
unique(covid_ind$FECHA)
sum(is.na(covid_ind$FECHA)) # 0 NAs
unique(covid_ind$DIA)
sum(is.na(covid_ind$DIA)) # 0 NAs
unique(covid_ind$MES)
sum(is.na(covid_ind$MES)) # 0 NAs
unique(covid_ind$ANO)
sum(is.na(covid_ind$ANO)) # 0 NAs
unique(covid_ind$REGION)
sum(is.na(covid_ind$REGION)) # 0 NAs
unique(covid_ind$PROVINCIA)
sum(is.na(covid_ind$PROVINCIA)) # 5741 NAs
unique(covid_ind$DISTRITO)
sum(is.na(covid_ind$DISTRITO)) # 6155 NAs
unique(covid_ind$DIRECCION)
sum(is.na(covid_ind$DIRECCION)) # 6838NAs
unique(covid_ind$EDAD_A_n)
sum(is.na(covid_ind$EDAD_A_n)) # 6547 NAs
unique(covid_ind$SEXOM1H0)
sum(is.na(covid_ind$SEXOM1H0)) # 6480 NAs
unique(covid_ind$HOSPITALIZADOS1N0)
sum(is.na(covid_ind$HOSPITALIZADOS1N0)) # 6531 NAs
unique(covid_ind$AISLADODOMICILS1N0)
sum(is.na(covid_ind$AISLADODOMICILS1N0)) # 6532 NAs
unique(covid_ind$CONTACTO)
sum(is.na(covid_ind$CONTACTO)) # 6558 NAs
unique(covid_ind$IMPORTADO)
sum(is.na(covid_ind$IMPORTADO)) # 6749 NAs
unique(covid_ind$ORIGEN_INTERNACIONAL)
sum(is.na(covid_ind$ORIGEN_INTERNACIONAL)) # 6798 NAs
unique(covid_ind$CASO_CONTACTO)
sum(is.na(covid_ind$CASO_CONTACTO)) #  6795 NAs
unique(covid_ind$RELACION_CONTACTO)
sum(is.na(covid_ind$RELACION_CONTACTO)) #  6795 NAs
unique(covid_ind$ORIGEN_NACIONAL)
sum(is.na(covid_ind$ORIGEN_NACIONAL)) # 6755 NAs
# Save dataset
names(covid_ind)
covid_ind <- covid_ind[,c(1:10,24,11:23)]
names(covid_ind)
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200401_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200402_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200403_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200404_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200405_CA.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200406_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200407_CA.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200408_MD.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200409_CA.csv")
# covid_ind <- fread("~/covid19/data/crudas/covidPE_IND_20200410_MD.csv")
covid_inde <- fread("~/covid19/data/crudas/covidPE_IND_20200411_CA.csv")
library(data.table)
library(dplyr)
library(tidyr)
library(tidyverse)
library(lubridate)
## set directory
setwd("~/covid19")
## Call data
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200403_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200404_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200405_CA.csv")
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200406_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200407_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200408_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200409_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200410_MD.csv")
## Call data
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200403_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200404_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200405_CA.csv")
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200406_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200407_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200408_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200409_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200410_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200411_CA.csv")
covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200412_CA.csv")
## Checar base
str(covid_dia) # 36 obs. of  15 variables
## Call data
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200403_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200404_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200405_CA.csv")
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200406_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200407_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200408_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200409_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200410_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200411_CA.csv")
covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200412_MD.csv")
## Checar base
str(covid_dia) # 36 obs. of  15 variables
names(covid_dia)
head(covid_dia)
# Transform to character
covid_dia <- mutate_if(covid_dia, is.character, toupper)
sapply(covid_dia, class)
### variable by variable
### Fecha ####
table(covid_dia$FECHA)
#### separando caracteres en varias columnas ######
covid_dia$FECHA2 <- covid_dia$FECHA
#### separando caracteres en varias columnas ######
covid_dia$FECHA2 <- covid_dia$FECHA
covid_dia <- separate(covid_dia,
col = "FECHA2",
into = c("DIA", "MES","ANO"),
sep = "/")
##### fecha to as.date format ####
covid_dia<-covid_dia %>%
mutate(FECHA = as.Date(as.character(FECHA), format = "%d/%m/%y"))
### ordenar base ###
names(covid_dia)
covid_dia <- covid_dia[,c(1, 15:17, 2:14)]
###### limpieza casos por indartamento #####
library(data.table)
library(dplyr)
library(tidyr)
library(tidyverse)
library(lubridate)
## set directory
setwd("~/covid19")
## Call data
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200403_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200404_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200405_CA.csv")
#covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200406_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200407_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200408_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200409_CA.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200410_MD.csv")
# covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200411_CA.csv")
covid_dia <- fread("~/covid19/data/crudas/covidPE_pordia_20200412_MD.csv")
## Checar base
str(covid_dia) # 37 obs. of  14 variables
names(covid_dia)
# [1] "FECHA"              "TOTAL_POSITIVOS"    "TOTAL_PRUEBAS"      "TOTAL_DESCARTADOS"
# [5] "POSITIVOS_DIA"      "PRUEBAS_DIA"        "DESCARTADOS_DIA"    "RECUPERADOS"
# [9] "FALLECIDOS"         "HOSPITALIZADOS"     "HOSPITALIZADOS_UCI" "OBSERVACION"
# [13] "FUENTE"             "ACTUALIZACION"
# Mas adelante  Sacar los "S1N0 del nombre de la variable
head(covid_dia)
# Transformar todo texto a mayusculas
# Transform to character
covid_dia <- mutate_if(covid_dia, is.character, toupper)
sapply(covid_dia, class)
# FECHA    TOTAL_POSITIVOS      TOTAL_PRUEBAS  TOTAL_DESCARTADOS
# "character"          "integer"          "integer"          "integer"
# POSITIVOS_DIA        PRUEBAS_DIA    DESCARTADOS_DIA        RECUPERADOS
# "integer"          "integer"          "integer"          "integer"
# FALLECIDOS     HOSPITALIZADOS HOSPITALIZADOS_UCI        OBSERVACION
# "integer"          "integer"          "integer"        "character"
# FUENTE      ACTUALIZACION
# "character"        "character"
### variable by variable
### Fecha ####
# table(covid_dia$FECHA)
# 1/04/2020 02/04/2020 03/04/2020 04/04/2020 05/04/2020 06/03/2020 06/04/2020
# 1          1          1          1          1          1          1
# 07/03/2020 07/04/2020 08/03/2020 08/04/2020 09/03/2020 09/04/2020 10/03/2020
# 1          1          1          1          1          1          1
# 10/04/2020 11/03/2020 11/04/2020 12/03/2020 13/03/2020 14/03/2020 15/03/2020
# 1          1          1          1          1          1          1
# 16/03/2020 17/03/2020 18/03/2020 19/03/2020 20/03/2020 21/03/2020 22/03/2020
# 1          1          1          1          1          1          1
# 23/03/2020 24/03/2020 25/03/2020 26/03/2020 27/03/2020 28/03/2020 29/03/2020
# 1          1          1          1          1          1          1
# 30/03/2020 31/03/2020
# 1          1
#### separando caracteres en varias columnas ######
covid_dia$FECHA2 <- covid_dia$FECHA
covid_dia <- separate(covid_dia,
col = "FECHA2",
into = c("DIA", "MES","ANO"),
sep = "/")
##### fecha to as.date format ####
covid_dia<-covid_dia %>%
mutate(FECHA = as.Date(as.character(FECHA), format = "%d/%m/%y"))
### ordenar base ###
names(covid_dia)
# [1] "FECHA"              "TOTAL_POSITIVOS"    "TOTAL_PRUEBAS"      "TOTAL_DESCARTADOS"
# [5] "POSITIVOS_DIA"      "PRUEBAS_DIA"        "DESCARTADOS_DIA"    "RECUPERADOS"
# [9] "FALLECIDOS"         "HOSPITALIZADOS"     "HOSPITALIZADOS_UCI" "OBSERVACION"
# [13] "FUENTE"             "ACTUALIZACION"      "DIA"                "MES"
# [17] "ANO"
covid_dia <- covid_dia[,c(1, 15:17, 2:14)]
## Fecha
str(covid_dia$FECHA) # date
unique(covid_dia$FECHA)
sum(is.na(covid_dia$FECHA)) # 0 NAs
unique(covid_dia$TOTAL_POSITIVOS)
sum(is.na(covid_dia$TOTAL_POSITIVOS)) # 0 NAs
unique(covid_dia$TOTAL_PRUEBAS)
sum(is.na(covid_dia$TOTAL_PRUEBAS)) # 0 NAs
unique(covid_dia$TOTAL_DESCARTADOS)
sum(is.na(covid_dia$TOTAL_DESCARTADOS)) # 0 NAs
unique(covid_dia$POSITIVOS_DIA)
sum(is.na(covid_dia$POSITIVOS_DIA)) # 0 NAs
unique(covid_dia$PRUEBAS_DIA)
sum(is.na(covid_dia$PRUEBAS_DIA)) # 0 NAs
unique(covid_dia$DESCARTADOS_DIA)
sum(is.na(covid_dia$DESCARTADOS_DIA)) # 0
unique(covid_dia$RECUPERADOS)
sum(is.na(covid_dia$RECUPERADOS)) # 9 NAs
unique(covid_dia$FALLECIDOS)
sum(is.na(covid_dia$FALLECIDOS)) # 12 NAs
unique(covid_dia$HOSPITALIZADOS)
sum(is.na(covid_dia$HOSPITALIZADOS)) # 12 NAs
unique(covid_dia$HOSPITALIZADOS_UCI)
sum(is.na(covid_dia$HOSPITALIZADOS_UCI)) # 19 NAs
names(covid_dia)
# Save csv.
# CAMBIA EL NOMBRE! NO TE OLVIDES!
write.csv(covid_dia, "data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200411_pruebas_vs_positivos_COVID19.png")
dev.off()
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200412_pruebas_vs_positivos_COVID19.png")
ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
dev.off()
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
#acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200411_pruebas_vs_positivos_COVID19.png")
ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
dev.off()
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200412_pruebas_vs_positivos_COVID19.png")
ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
dev.off()
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200412_pruebas_vs_positivos_COVID19.png")
ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
dev.off()
