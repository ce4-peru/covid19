breaks=c(0.0, 1, 2, 5, 10, 20, 30, 100),
labels=c("< 1", "1 a 2",
"2 a 5", "5 a 10", "10 a 20",
#"8 a 10",
"20 a 30", "> 30"))
View(tmp1_map_df)
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
View(tmp1_map_df)
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(0.0, 1, 2, 5, 10, 20, 40, 100),
labels=c("< 1", "1 a 2",
"2 a 5", "5 a 10", "10 a 20",
#"8 a 10",
"20 a 40", "> 40"))
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
# Create the map qtm
col <- c("ivory2", "lightcyan1", "lightblue2",
#"lightskyblue",
"royalblue", "blue2", "navyblue", "black")
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Incidencia de \nSARS-CoV2 \nen Peru"), title.size = .92,
legend.title.size = 0.8,
legend.text.size = .6, legend.bg.color = NA,
legend.position = c("left","bottom"),
#outer.margins =c(0.05, 0.05, 0.05, 0.05)
#inner.margins =c(0.05, 0.05, 0.05, 0.05)
title.position = c(.05,.905)) #+ vs5
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
tmap_save(qtm,
paste("outputs_covid19/20200413_Dep_COVID19_Incidencerate",
".png", sep=""),
width=2300, height=1380)
# Poner el # luego de guardar grafico
library(data.table)
library(dplyr)
library(tidyr)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(directlabels)
library(reshape)
library(colorspace)
library(plotly)
######## ploting national cases with overlaping line ##########
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200413_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
ggplotly(p)
?ggplotly
??ggplotly
library(ggplot2)
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200413_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200413_pruebas_vs_positivos_COVID19.png")
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
ggplotly(p)
library(plotly)
install.packages("ploty")
install.packages("plotly")
library(data.table)
library(dplyr)
library(tidyr)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(directlabels)
library(reshape)
library(colorspace)
library(plotly)
library(ggplot2)
######## ploting national cases with overlaping line ##########
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200413_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
setwd("~/covid19/outputs_covid19/")
# cambio n[umero
png(filename="20200413_pruebas_vs_positivos_COVID19.png")
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
ggplotly(p)
dev.off()
dev.off()
library(data.table)
library(dplyr)
library(tidyr)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(directlabels)
library(reshape)
library(colorspace)
library(plotly)
library(ggplot2)
######## ploting national cases with overlaping line ##########
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200406_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200407_CA_clean.csv.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200410_MD_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200411_CA_clean.csv")
# acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200412_MD_clean.csv")
acumulado<-fread("~/covid19/data/modificadas/covidPE_PORdia_20200413_CA_clean.csv")
acumulado1<-melt(acumulado,id="FECHA")
acumulado1$value<-as.numeric(acumulado1$value)
target <- c("TOTAL_POSITIVOS", "TOTAL_PRUEBAS")
acumulado1<-filter(acumulado1, variable %in% target)
View(acumulado1)
setwd("~/covid19/outputs_covid19/")
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
ggplotly(p)
ggplotly(p)
ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
ggplotly(p)
#ggplotly(p)
plot(p)
# cambio n[umero
png(filename="20200413_pruebas_vs_positivos_COVID19.png")
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
#ggplotly(p)
plot(p)
dev.off()
png(filename="20200413_pruebas_vs_positivos_COVID19.png", width=12, height=6)
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
#ggplotly(p)
plot(p)
dev.off()
png(filename="20200413_pruebas_vs_positivos_COVID19.png", width=1200, height=600)
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
#ggplotly(p)
plot(p)
dev.off()
# ######## dibujando graficos interactivos #########
# df_dep<-fread("~/covid19/data/modificadas/covidPE_DEP_20200413_CA_clean.csv")
# palM <- c("maroon", "darkorange3", "goldenrod3", "darkgreen", "navy", "plum4", "black",
#           "lightcoral", "peachpuff2", "khaki1", "olivedrab3", "steelblue1", "thistle", "snow2",
#           "red3", "orange", "gold", "springgreen4", "dodgerblue3", "mediumpurple", "gray")
#
# pal1 <- palM[1:length(unique(df_dep$REGION))]
#
# p<-ggplot(df_dep, aes(Fecha1, CASOS, colour=REGION,group=REGION)) +
#   geom_line() +
#   scale_colour_manual(values=pal1)+
#   theme(legend.position = c(0.35,0.95),
#         legend.justification = c("right","top"))+
#   theme(axis.text.x = element_text(angle=90))+
#   labs(title="SARS-CoV2 en Peru", y="Casos por region",
#        x="Fecha", caption="Source :varios")+
png(filename="20200413_pruebas_vs_positivos_COVID19.png", width=1100, height=600)
p<-ggplot(acumulado1, aes(FECHA, value, colour=variable,group=variable)) +
geom_line() +
scale_colour_manual(values=c("red", "blue"))+
theme(legend.position = c(0.35,0.95),
legend.justification = c("right","top"))+
theme(axis.text.x = element_text(angle=90))+
labs(title="SARS-CoV2 en Peru", y="Pruebas positivas y pruebas realizadas",
x="Fecha", caption="Source :varios")+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-12") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-26") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-02") +
geom_vline(xintercept = "2020-04-08") +
annotate("text", x = "2020-03-06", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-11", y = 4000,
label = " Cierre colegios", size = 2.5)+
annotate("text", x = "2020-03-12", y = 5000,
label = " Cierre universidades", size = 2.5)+
annotate("text", x = "2020-03-15", y = 6000,
label = " inicio de cuarentena", size = 2.5)+
annotate("text", x = "2020-03-26", y = 7000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-02", y = 9000,
label = " Restriccion por sexo", size = 2.5)+
annotate("text", x = "2020-03-31", y = 8000,
label = " toque de queda 18pm-5am", size = 2.5)+
annotate("text", x = "2020-04-07", y = 10000,
label = " Extension cuarentena", size = 2.5)
#ggplotly(p)
plot(p)
dev.off()
# ######## dibujando graficos interactivos #########
# df_dep<-fread("~/covid19/data/modificadas/covidPE_DEP_20200413_CA_clean.csv")
# palM <- c("maroon", "darkorange3", "goldenrod3", "darkgreen", "navy", "plum4", "black",
#           "lightcoral", "peachpuff2", "khaki1", "olivedrab3", "steelblue1", "thistle", "snow2",
#           "red3", "orange", "gold", "springgreen4", "dodgerblue3", "mediumpurple", "gray")
#
# pal1 <- palM[1:length(unique(df_dep$REGION))]
