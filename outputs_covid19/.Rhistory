unique(covid_ind$REGION)
# [1] "LIMA"          "AREQUIPA"      "HUáNUCO"      "ICA"           "CUSCO"
# [6] "ANCASH"        "CALLAO"        "LA LIBERTAD"   "LAMBAYEQUE"    "PIURA"
# [11] "LORETO"        "MADRE DE DIOS" "SAN MARTIN"    "JUNIN"         "TUMBES"
# [16] "CAJAMARCA"     "HUANUCO"       "PASCO"         "AYACUCHO"      "TACNA"
# [21] "HUANCAVELICA"  ""
# "Huánuco" con tilde
# Cambiar Huanuco
levels(covid_ind$REGION) <- c(levels(covid_ind$REGION),
c("APURIMAC", "HUANUCO",
"JUNIN", "SAN MARTIN"))
covid_ind$REGION[covid_ind$REGION == "HUáNUCO"] <- "HUANUCO"
covid_ind$REGION[covid_ind$REGION == ""] <- NA
unique(covid_ind$REGION) # ok
# [1] "LIMA"          "AREQUIPA"      "HUANUCO"       "ICA"           "CUSCO"
# [6] "ANCASH"        "CALLAO"        "LA LIBERTAD"   "LAMBAYEQUE"    "PIURA"
# [11] "LORETO"        "MADRE DE DIOS" "SAN MARTIN"    "JUNIN"         "TUMBES"
# [16] "CAJAMARCA"     "PASCO"         "AYACUCHO"      "TACNA"         "HUANCAVELICA"
# [21] "APURIMAC"
## Provincia
str(covid_ind$PROVINCIA) # chr
unique(covid_ind$PROVINCIA)
# [1] "LIMA"                   "AREQUIPA"               "HUANUCO"
# [4] "CHINCHA"                "CUSCO"                  ""
# [7] "SANTA"                  "CALLAO"                 "TRUJILLO"
# [10] "CHICLAYO"               "PIURA"                  "MAYNAS"
# [13] "TAMBOPATA"              "SAN MARTIN"             "HUANCAYO"
# [16] "FERRENAFE"              "SULLANA"                "ICA"
# [19] "TUMBES"                 "CAJAMARCA"              "PAITA"
# [22] "DANIEL ALCIDES CARRION" "ZARUMILLA"              "MARISCAL CACERES"
# [25] "HUAMANGA"               "CONVENCION"             "FERREñAFE"
# [28] "TACNA"                  "MOYOBAMBA"              "RIOJA"
# [31] "LEONCIO PRADO"          "LAMBAYEQUE"             "HUARAZ"
# [34] "JAEN"                   "ACOBAMABA"              "ASCOPE"
# [37] "SECHURA"                "CONTRALMIRANTE VILLAR"  "LORETO"
# [40] "CAYLLOMA"               "ANDAHUAYLAS"
# Hay  ""
#  "FERREñAFE" con n.
levels(covid_ind$PROVINCIA) <- c(levels(covid_ind$PROVINCIA),
c("APURIMAC", "HUANUCO",
"JUNIN", "SAN MARTIN", "FERRENAFE"))
covid_ind$PROVINCIA[covid_ind$PROVINCIA == "FERREñAFE"] <- "FERRENAFE"
covid_ind$PROVINCIA[covid_ind$PROVINCIA == ""] <- NA
unique(covid_ind$PROVINCIA)
## Distrito
str(covid_ind$DISTRITO) # chr
unique(covid_ind$DISTRITO)
str(covid_ind$PROVINCIA) # chr
unique(covid_ind$PROVINCIA)
covid_ind$DISTRITO[covid_ind$DISTRITO == "FERREñAFE"] <- "FERRENAFE"
covid_ind$DISTRITO[covid_ind$DISTRITO == ""] <- NA
unique(covid_ind$DISTRITO)
## Direccion
str(covid_ind$DIRECCION) # logi
unique(covid_ind$DIRECCION) # NA
# Todos NAs
## Edad
str(covid_ind$EDAD_A) # chr
covid_ind$EDAD_A_n <- as.numeric(covid_ind$EDAD_A)
View(covid_ind)
str(covid_ind$EDAD_A_n)# ok
table(covid_ind$EDAD_A_n) # ok, from 2 to 96.
covid_ind$EDAD_A[covid_ind$EDAD_A == ""] <- NA
## Sexo
str(covid_ind$SEXOM1H0) # int
table(covid_ind$SEXOM1H0) # 0 and 1
str(covid_ind$HOSPITALIZADOS1N0) # int
table(covid_ind$HOSPITALIZADOS1N0) # 0 and 1
# 0  1
# 153  38
str(covid_ind$AISLADODOMICILS1N0) # int
table(covid_ind$AISLADODOMICILS1N0) # 0 and 1
str(covid_ind$CONTACTO) # CHR
unique(covid_ind$CONTACTO)
# ya est? desagregado en m?s variables
# Dividir en 3 o 4 columnas esta inforamci[on como se indic[o en el googlesheet.
covid_ind$CONTACTO[covid_ind$CONTACTO == ""] <- NA
## IMPORTADO
str(covid_ind$IMPORTADO) # int
unique(covid_ind$IMPORTADO)
# [1] "1"    "0"    NA
covid_ind$IMPORTADO[covid_ind$IMPORTADO == "LINK"] <- NA
covid_ind$IMPORTADO[covid_ind$IMPORTADO == ""] <- NA
## ORIGEN_INTERNACIONAL
str(covid_ind$ORIGEN_INTERNACIONAL) # chr
unique(covid_ind$ORIGEN_INTERNACIONAL)
# [1] "EUROPA"        ""              "UK"            "ESPANA"        "ITALIA"
# [6] "WASHINGTON DC" "EEUU"
# Hay ""
covid_ind$ORIGEN_INTERNACIONAL[covid_ind$ORIGEN_INTERNACIONAL == ""] <- NA
unique(covid_ind$ORIGEN_INTERNACIONAL)
covid_ind$ORIGEN_INTERNACIONAL[covid_ind$ORIGEN_INTERNACIONAL == "LINK 2"] <- NA
## CASO_CONTACTO
str(covid_ind$CASO_CONTACTO) # int
unique(covid_ind$CASO_CONTACTO)
# [1] NA  1
# Hay NA
## RELACION_CONTACTO
str(covid_ind$RELACION_CONTACTO) # chr
unique(covid_ind$RELACION_CONTACTO)
# [1] NA     "FAMILIAR"    "AMIGO"       ""    "TURISTA"     "RELACIONADO"
# Hay ""
covid_ind$RELACION_CONTACTO[covid_ind$RELACION_CONTACTO == ""] <- NA
## ORIGEN_NACIONAL
str(covid_ind$ORIGEN_NACIONAL) # chr
unique(covid_ind$ORIGEN_NACIONAL)
# [1] "LIMA"           "AREQUIPA"       "HUANUCO"        "CHINCHA"        ""
# [6] "CUSCO"          "NUEVO CHIMBOTE" "HUANCHACO"      "LA VICTORIA"    "PIURA"
# [11] "CHICLAYO"       "IQUITOS"        "TRUJILLO"
# Hay ""
covid_ind$ORIGEN_NACIONAL[covid_ind$ORIGEN_NACIONAL == ""] <- NA
## Double check "" and count NAs
unique(covid_ind$CASO_ID)
sum(is.na(covid_ind$CASO_ID)) # 1378 NAs
unique(covid_ind$FECHA)
sum(is.na(covid_ind$FECHA)) # 0 NAs
unique(covid_ind$DIA)
sum(is.na(covid_ind$DIA)) # 0 NAs
unique(covid_ind$MES)
sum(is.na(covid_ind$MES)) # 0 NAs
unique(covid_ind$ANO)
sum(is.na(covid_ind$ANO)) # 0 NAs
unique(covid_ind$REGION)
sum(is.na(covid_ind$REGION)) # 0 NAs
unique(covid_ind$PROVINCIA)
sum(is.na(covid_ind$PROVINCIA)) # 1247 NAs
unique(covid_ind$DISTRITO)
sum(is.na(covid_ind$DISTRITO)) # 1360 NAs
unique(covid_ind$DIRECCION)
sum(is.na(covid_ind$DIRECCION)) # 1595 NAs
unique(covid_ind$EDAD_A_n)
sum(is.na(covid_ind$EDAD_A_n)) # 1415 NAs
unique(covid_ind$SEXOM1H0)
sum(is.na(covid_ind$SEXOM1H0)) # 1376 NAs
unique(covid_ind$HOSPITALIZADOS1N0)
sum(is.na(covid_ind$HOSPITALIZADOS1N0)) # 1404 NAs
unique(covid_ind$AISLADODOMICILS1N0)
sum(is.na(covid_ind$AISLADODOMICILS1N0)) # 1405 NAs
unique(covid_ind$CONTACTO)
sum(is.na(covid_ind$CONTACTO)) # 1435 NAs
unique(covid_ind$IMPORTADO)
sum(is.na(covid_ind$IMPORTADO)) # 1560 NAs
unique(covid_ind$ORIGEN_INTERNACIONAL)
sum(is.na(covid_ind$ORIGEN_INTERNACIONAL)) # 1578 NAs
unique(covid_ind$CASO_CONTACTO)
sum(is.na(covid_ind$CASO_CONTACTO)) #  1577 NAs
unique(covid_ind$ORIGEN_NACIONAL)
sum(is.na(covid_ind$ORIGEN_NACIONAL)) # 1560 NAs
names(covid_ind)
# [1] "CASO_ID"              "FECHA"                "DIA"
# [4] "MES"                  "ANO"                  "REGION"
# [7] "PROVINCIA"            "DISTRITO"             "DIRECCION"
# [10] "EDAD_A"               "SEXOM1H0"             "HOSPITALIZADOS1N0"
# [13] "AISLADODOMICILS1N0"   "CONTACTO"             "IMPORTADO"
# [16] "ORIGEN_INTERNACIONAL" "CASO_CONTACTO"        "RELACION_CONTACTO"
# [19] "ORIGEN_NACIONAL"      "ENLACES1"             "ENLACES2"
# [22] "ENLACES3"             "OBSERVACIONES"        "EDAD_A_n"
covid_ind <- covid_ind[,c(1:10,24,11:23)]
names(covid_ind)
# [1] "CASO_ID"              "FECHA"                "DIA"
# [4] "MES"                  "ANO"                  "REGION"
# [7] "PROVINCIA"            "DISTRITO"             "DIRECCION"
# [10] "EDAD_A"               "EDAD_A_n"             "SEXOM1H0"
# [13] "HOSPITALIZADOS1N0"    "AISLADODOMICILS1N0"   "CONTACTO"
# [16] "IMPORTADO"            "ORIGEN_INTERNACIONAL" "CASO_CONTACTO"
# [19] "RELACION_CONTACTO"    "ORIGEN_NACIONAL"      "ENLACES1"
# [22] "ENLACES2"             "ENLACES3"             "OBSERVACIONES"
# Save csv.
# CAMBIA EL NOMBRE! NO TE OLVIDES!
write.csv(covid_ind, "data/modificadas/covidPE_IND_20200405_CA_clean.csv")
setwd('~/covid19/outputs_covid19/')
####casos_acumulado por semana#####
### weekly incidense #####
acumulado_dep<-fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
#acumulado_dep <- mutate_if(acumulado_dep, is.character, toupper)
#acumulado_dep<-acumulado_dep %>%
#  mutate(Fecha = as.Date(as.character(Fecha), format = "%d/%m/%y"))
#str(acumulado_dep, strict.width = "cut", width = 76)
i.7.group <- incidence(acumulado_dep$FECHA, interval = 7,
groups = acumulado_dep$REGION)
library(JLutils)
library(magrittr)
library(ggthemr)
library(ggplot2)
library('incidence')
library('outbreaks')
setwd('~/covid19/outputs_covid19/')
####casos_acumulado por semana#####
### weekly incidense #####
acumulado_dep<-fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
#acumulado_dep <- mutate_if(acumulado_dep, is.character, toupper)
#acumulado_dep<-acumulado_dep %>%
#  mutate(Fecha = as.Date(as.character(Fecha), format = "%d/%m/%y"))
#str(acumulado_dep, strict.width = "cut", width = 76)
i.7.group <- incidence(acumulado_dep$FECHA, interval = 7,
groups = acumulado_dep$REGION)
# plot
my_theme <- theme_bw(base_size = 12) +
theme(panel.grid.minor = element_blank()) +
theme(axis.text.x = element_text(angle = 90,
hjust = 1, vjust = 0.5, color = "black"))
# save plot
png(filename="20200404_weekly_incid_COVID19.png")
plot(i.7.group, border = "white", ylab="N?mero de casos por semana") +
my_theme +
# theme(legend.position = "topleft")
theme(legend.position = c(-1.0, -1.0))
acumulado_dep<-fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
#acumulado_dep <- mutate_if(acumulado_dep, is.character, toupper)
#acumulado_dep<-acumulado_dep %>%
#  mutate(Fecha = as.Date(as.character(Fecha), format = "%d/%m/%y"))
#str(acumulado_dep, strict.width = "cut", width = 76)
i.7.group <- incidence(acumulado_dep$FECHA, interval = 7,
groups = acumulado_dep$REGION)
# plot
my_theme <- theme_bw(base_size = 12) +
theme(panel.grid.minor = element_blank()) +
theme(axis.text.x = element_text(angle = 90,
hjust = 1, vjust = 0.5, color = "black"))
# save plot
png(filename="20200405_weekly_incid_COVID19.png")
plot(i.7.group, border = "white", ylab="N?mero de casos por semana") +
my_theme +
# theme(legend.position = "topleft")
theme(legend.position = c(-1.0, -1.0))
dev.off()
# daily
i.7.group <- incidence(acumulado_dep$FECHA, interval = 1,
groups = acumulado_dep$REGION)
# plot
my_theme <- theme_bw(base_size = 12) +
theme(panel.grid.minor = element_blank()) +
theme(axis.text.x = element_text(angle = 90,
hjust = 1, vjust = 0.5, color = "black"))
png(filename="20200405_daily_incid_COVID19.png")
plot(i.7.group, border = "white", ylab="N?mero de casos por d?a") +
my_theme +
# theme(legend.position = "topleft")
theme(legend.position = c(-1.0, -1.0))
dev.off()
scaleFactor <- max(acumulado$TOTAL_POSITIVOS) / max(acumulado$TOTAL_PRUEBAS)
fig1 <- ggplot() +
theme_classic()+
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_POSITIVOS), color="red", binwidth = 1)+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./scaleFactor, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = FECHA, y = TOTAL_POSITIVOS, group=1), color = "red") +
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_POSITIVOS), color="red", binwidth = 1)+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./scaleFactor, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./scaleFactor, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_POSITIVOS), color="red", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./scaleFactor, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_POSITIVOS,group=1), color="red", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./scaleFactor, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_PRUEBAS,group=1), color="red", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./5, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 250,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 300,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 400,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 500,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 600,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_PRUEBAS,group=1), color="blue", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./5, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 4000,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 5000,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 6000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 7000,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_PRUEBAS,group=1), color="blue", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.title.x = element_blank(),
axis.text.x = element_blank())
fig1
fig1 <- ggplot() +
theme_classic()+
# scale_fill_manual(values = pal1)+
# scale_x_date(breaks=seq(min(acumulado$FECHA)-1, max(acumulado$FECHA)+1, 1))+
geom_line(data = acumulado , aes( x=acumulado$FECHA,y =acumulado$TOTAL_PRUEBAS ), color = "blue")+
scale_y_continuous(name="TOTAL_POSITIVOS", sec.axis=sec_axis(~./5, name="TOTAL_PRUEBAS")) +
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
)+
geom_vline(xintercept = "2020-03-06") +
geom_vline(xintercept = "2020-03-11") +
geom_vline(xintercept = "2020-03-15") +
geom_vline(xintercept = "2020-03-31") +
geom_vline(xintercept = "2020-04-03") +
annotate("text", x = "2020-03-07", y = 3000,
label = " Primer Caso", size = 2.5)+
annotate("text", x = "2020-03-12", y = 4000,
label = " Suspension labores", size = 2.5)+
annotate("text", x = "2020-03-16", y = 5000,
label = " Inicio cuarentena", size = 2.5)+
annotate("text", x = "2020-04-01", y = 6000,
label = " Extension cuarentena", size = 2.5)+
annotate("text", x = "2020-04-03", y = 7000,
label = " Primer Caso", size = 2.5)+
geom_line(aes(x = acumulado$FECHA, y = acumulado$TOTAL_POSITIVOS, group=1), color = "red") +
geom_line(data = acumulado, aes(x= acumulado$FECHA,y=acumulado$TOTAL_PRUEBAS,group=1), color="blue", binwidth = 1)+
ylab("Casos Positivos") +
theme_minimal() +
theme(axis.text.x = element_text(angle=90))
fig1
