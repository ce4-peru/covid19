caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
# tabla de poblacion por regiones
pob_region <- read.csv("~/covid19/data/Poblacion por region.csv")
## Check the neighborhood shapefile data and plot
sh_peru@data$NAME_1
# Lima and Lima Province should be the same.
# Que quede solo una Lima
sh_peru$NAME_1 <- recode(sh_peru$NAME_1, `Lima Province` = "Lima")
unique(sh_peru$NAME_1)
sh_peru$NAME_1 <- factor(sh_peru$NAME_1)
levels(sh_peru@data$NAME_1)
# Change names
str(sh_peru@data)
levels(sh_peru$NAME_1) <- c(levels(sh_peru$NAME_1),
c("Apurimac", "Huanuco",
"Junin", "San Martin"))
sh_peru_df <- sh_peru@data
sh_peru[3,6] <- "Apurimac"
sh_peru[9,6] <- "Huanuco"
sh_peru[12,6] <- "Junin"
sh_peru[23,6] <- "San Martin"
sh_peru_df <- sh_peru@data
sh_peru@data$NAME_1 <- factor(sh_peru@data$NAME_1)
levels(sh_peru@data$NAME_1)
# [1] "Amazonas"      "Ancash"        "Arequipa"      "Ayacucho"
# [5] "Cajamarca"     "Callao"        "Cusco"         "Huancavelica"
# [9] "Ica"           "La Libertad"   "Lambayeque"    "Lima"
# [13] "Loreto"        "Madre de Dios" "Moquegua"      "Pasco"
# [17] "Piura"         "Puno"          "Tacna"         "Tumbes"
# [21] "Ucayali"       "Apurimac"      "Huanuco"       "Junin"
# [25] "San Martin"
## plotting shapefiles
plot(sh_peru)
# Transformar a mayusculas
sh_peru[[6]] <- toupper(sh_peru[[6]])
str(sh_peru@data$NAME_1)
unique(sh_peru@data$NAME_1)
# [1] "AMAZONAS"      "ANCASH"        "APURIMAC"      "AREQUIPA"
# [5] "AYACUCHO"      "CAJAMARCA"     "CALLAO"        "CUSCO"
# [9] "HUANUCO"       "HUANCAVELICA"  "ICA"           "JUNIN"
# [13] "LA LIBERTAD"   "LAMBAYEQUE"    "LIMA"          "LORETO"
# [17] "MADRE DE DIOS" "MOQUEGUA"      "PASCO"         "PIURA"
# [21] "PUNO"          "SAN MARTIN"    "TACNA"         "TUMBES"
# [25] "UCAYALI"
## Check data of cases
names(caso_covid)
colnames(caso_covid)[1] <- "CE4_ID"
colnames(caso_covid)[7] <- "NAME_1"
# Checar las variables. Que no haya tildes, espacios innecesarios o ""
unique(caso_covid$NAME_1)
# Sale mal Huanuco
# Eliminar NAs y tildes
#caso_covid <- caso_covid[caso_covid$NAME_1 != ""]
caso_covid$NAME_1[caso_covid$Caso_ID %in% c(10,11)] <- "HUANUCO"
# no funciona no s[e por que]
caso_covid[11,7] <- "HUANUCO"
caso_covid[10,7] <- "HUANUCO"
unique(caso_covid$NAME_1)
# [1] "LIMA"          "AREQUIPA"      "HUANUCO"       "ICA"           "CUSCO"
# [6] "ANCASH"        "CALLAO"        "LA LIBERTAD"   "LAMBAYEQUE"    "PIURA"
# [11] "LORETO"        "MADRE DE DIOS" "SAN MARTIN"    "JUNIN"         "TUMBES"
# [16] "CAJAMARCA"     "PASCO"         "AYACUCHO"      "TACNA"         "HUANCAVELICA"
# [21] "APURIMAC"
casos_region <- data.frame(table(caso_covid$NAME_1))
colnames(casos_region)[1] <- "REGION"
colnames(casos_region)[2] <- "NUMERO_CASOS"
## Checar csv de poblaciones regionales
names(pob_region) # "REGION"    "POBLACION"
pob_region[[1]] <- toupper(pob_region[[1]])
unique(pob_region$REGION) # todo ok
# [1] "AMAZONAS"      "ANCASH"        "APURIMAC"      "AREQUIPA"      "AYACUCHO"
# [6] "CAJAMARCA"     "CALLAO"        "CUSCO"         "HUANCAVELICA"  "HUANUCO"
# [11] "ICA"           "JUNIN"         "LA LIBERTAD"   "LAMBAYEQUE"    "LIMA"
# [16] "LORETO"        "MADRE DE DIOS" "MOQUEGUA"      "PASCO"         "PIURA"
# [21] "PUNO"          "SAN MARTIN"    "TACNA"         "TUMBES"        "UCAYALI"
## Merge cases with populations
region_values <- merge(casos_region, pob_region, by="REGION",
all.x=T, all.y=T)
## Calcula incidencias
region_values$NUMERO_CASOS <- as.numeric(region_values$NUMERO_CASOS)
region_values$POBLACION <- as.numeric(as.character(region_values$POBLACION))
region_values$incidencia <- region_values$NUMERO_CASOS/region_values$POBLACION
options(digits = 2)
region_values$incidencerate_100 <-(region_values$incidencia*100000)
## recode the names of the region_values data frame
setnames(region_values, old = "REGION",new = "NAME_1")
levels(region_values$NAME_1)
# [1] "ANCASH"        "APURIMAC"      "AREQUIPA"      "AYACUCHO"      "CAJAMARCA"
# [6] "CALLAO"        "CUSCO"         "HUANCAVELICA"  "HUANUCO"       "ICA"
# [11] "JUNIN"         "LA LIBERTAD"   "LAMBAYEQUE"    "LIMA"          "LORETO"
# [16] "MADRE DE DIOS" "PASCO"         "PIURA"         "SAN MARTIN"    "TACNA"
# [21] "TUMBES"        "AMAZONAS"      "MOQUEGUA"      "PUNO"          "UCAYALI"
## Create labels that does not occupy
region_values$NAME_LABEL <- region_values$NAME_1
str(region_values$NAME_LABEL)
region_values$NAME_LABEL <- revalue(region_values$NAME_LABEL,
c("ANCASH"="ANC",
"AREQUIPA"="AQP",
"AYACUCHO" ="AYA",
"CAJAMARCA"="CAJ",
"CALLAO"="CAL",
"CUSCO" ="CUS",
"HUANUCO" ="HCO",
"ICA" ="ICA",
"JUNIN" ="JUN",
"LA LIBERTAD" ="LAL",
"LAMBAYEQUE" ="LAM",
"LIMA" ="LIM",
"LORETO"="LOR",
"MADRE DE DIOS"="MDD",
"PASCO" ="PAS",
"PIURA"="PIU",
"SAN MARTIN"="SAM",
"TACNA" ="TAC",
"TUMBES" ="TUM",
"AMAZONAS" ="AMA",
"MOQUEGUA"="MOQ",
"APURIMAC"="APU",
"HUANCAVELICA"="HUV",
"PUNO"="PUN",
"UCAYALI"="UCA"))
## Merge data with shapefile
## Merge data with shapefile
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
# tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
# tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
# tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
# tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
#                            breaks=c(-0.1, 0.0, 1, 2, 3, 4, 5, 6),
#                            labels=c("Sin casos reportados", "0 a 1", "1 a 2", "2 a 3",
#                                     "3 a 4", "4 a 5", "5 a 6"))
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
## Merge data with shapefile
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
# tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
# tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
# tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(-0.1, 0.0, 1, 2, 3, 4, 5, 6),
labels=c("Sin casos reportados", "0 a 1", "1 a 2", "2 a 3",
"3 a 4", "4 a 5", "5 a 6"))
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(-0.1, 0.0, 1, 2, 3, 4, 5, 6),
labels=c("Sin casos reportados", "0 a 1", "1 a 2", "2 a 3",
"3 a 4", "4 a 5", "5 a 6"))
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
View(tmp1_map_df)
View(tmp1_map_df)
View(tmp1_map_df)
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(-0.1, 0.0, 1, 2, 4, 6, 8, 10, 12, 20),
labels=c("Sin casos reportados", "< 1", "1 a 2",
"2 a 4", "4 a 6", "6 a 8",
"8 a 10", "10 a 12", "> 12"))
View(tmp1_map_df)
tmp1 <- sh_peru
tmp1_map <- tmp1
tmp1_map@data <- join(sh_peru@data,region_values, by="NAME_1") # shp with data
tmp1_map_df <- tmp1_map@data
tmp1_map@data$NUMERO_CASOS[is.na(tmp1_map@data$NUMERO_CASOS)]<-0
tmp1_map@data$incidencia[is.na(tmp1_map@data$incidencia)]<-0
tmp1_map@data$incidencerate_100[is.na(tmp1_map@data$incidencerate_100)]<-0
tmp1_map_df <- tmp1_map@data
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(-0.1, 0.0, 1, 2, 4, 6, 8, 10, 12, 20),
labels=c("Sin casos reportados", "< 1", "1 a 2",
"2 a 4", "4 a 6", "6 a 8",
"8 a 10", "10 a 12", "> 12"))
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
View(tmp1_map_df)
col <- c("white", "ivory2", "lightcyan1", "lightblue2", "lightskyblue",
"royalblue", "blue2", "navyblue", "black")
qtm <- qtm(tmp1_map, fill = "incidencerate_100",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab")
print(qtm)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = brks
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = 1,
legend.title.size = 0.8,
legend.text.size = .6, legend.bg.color = "white",
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = brks,
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab")
print(qtm)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab")
print(qtm)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = 1,
legend.title.size = 0.8,
legend.text.size = .6, legend.bg.color = "white",
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
# Poner el # luego de guardar grafico
print(qtm)
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
tmp1_map@data$brks <- cut(tmp1_map@data$incidencerate_100,
breaks=c(-0.1, 0.0, 1, 2, 4, 6, 8, 10, 12, 20),
labels=c("0", "< 1", "1 a 2",
"2 a 4", "4 a 6", "6 a 8",
"8 a 10", "10 a 12", "> 12"))
names(tmp1_map@data) # check variables
tmp1_map_df <- tmp1_map@data
# Create the map qtm
col <- c("white", "ivory2", "lightcyan1", "lightblue2", "lightskyblue",
"royalblue", "blue2", "navyblue", "black")
# col <- c("ivory2", "lightcyan1", "lightblue2", #"lightskyblue",
#           "royalblue", "blue2", "navyblue", "black")
# try snow2 too
# interactive view
#tmap_mode("view")
# crear mapa
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = 1,
legend.title.size = 0.8,
legend.text.size = .6, legend.bg.color = "white",
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
# RECUERDA CAMBIAR EL NOMBRE DEL ARCHIVO!
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = 1,
legend.title.size = 0.7,
legend.text.size = .6, legend.bg.color = NA,
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
# RECUERDA CAMBIAR EL NOMBRE DEL ARCHIVO!
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = .9,
legend.title.size = 0.7,
legend.text.size = .5, legend.bg.color = NA,
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
# RECUERDA CAMBIAR EL NOMBRE DEL ARCHIVO!
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
# Poner el # luego de guardar grafico
qtm <- qtm(tmp1_map, #fill = "incidencerate_100",
fill = "brks",
fill.palette = col,
fill.title="Incidencia por \n100,000 Hab") +
# tm_text("NAME_3", size="0.008", scale=1, root=4,
#         size.lowerbound = .1, bg.color="white", bg.alpha = .15,
#         legend.size.show = FALSE) +
tm_text("NAME_LABEL",size = 0.5)+
tm_layout(paste("Casos COVID19 \npor región"), title.size = .9,
legend.title.size = 0.8,
legend.text.size = .6, legend.bg.color = NA,
legend.position = c("left","bottom")) #+
#tm_view(set.view = c(lon = 15, lat = 48, zoom = 10))
# tm_view(set.view = c(zoom = 10))
print(qtm)
# RECUERDA CAMBIAR EL NOMBRE DEL ARCHIVO!
tmap_save(qtm,
paste("outputs_covid19/20200405_Dep_COVID19_Incidencerate_v2",
".png", sep=""),
width=2300, height=1380)
# Poner el # luego de guardar grafico
# This code explore formato 2 of the chiris project
# Call packages
library(ggplot2)
library(data.table)
library(raster)
#library(car)
library(dplyr)
library(plyr)
#install.packages("tmap")
library(tmap)
library(rgdal)
setwd("C:/Users/Micaela/Documents/covid19PE-LIEZ")
### CALL SHAPEFILES ###
## DISTRICT AND BEYOND...
tdcero <- tempdir() # save the directory
peru0 <- getData('GADM', country=c('PER'), level=0, path=tdcero)
peru1 <- getData('GADM', country=c('PER'), level=1, path=tdcero)
peru2 <- getData('GADM', country=c('PER'), level=2, path=tdcero)
peru3 <- getData('GADM', country=c('PER'), level=3, path=tdcero)
#peru4 <- getData('GADM', country=c('PER'), level=4, path=tdcero)
# no level 4
# Plot shapefiles
plot(peru0)
plot(peru1)
plot(peru2)
plot(peru3)
# get df
peru1_df <- peru1@data
peru2_df <- peru2@data
peru3_df <- peru3@data
## check variables in gadm2 - provinces
names(peru2@data)
# [1] "OBJECTID"  "ID_0"      "ISO"       "NAME_0"    "ID_1"      "NAME_1"
# [7] "ID_2"      "NAME_2"    "HASC_2"    "CCN_2"     "CCA_2"     "TYPE_2"
# [13] "ENGTYPE_2" "NL_NAME_2" "VARNAME_2"
head(peru2@data, 3)
# OBJECTID ID_0 ISO NAME_0 ID_1   NAME_1 ID_2      NAME_2   HASC_2 CCN_2 CCA_2
# 1        1  178 PER   Peru    1 Amazonas    1       Bagua PE.AM.BG    NA
# 2        2  178 PER   Peru    1 Amazonas    2     Bongará PE.AM.BN    NA
# 3        3  178 PER   Peru    1 Amazonas    3 Chachapoyas PE.AM.CP    NA
# TYPE_2 ENGTYPE_2 NL_NAME_2 VARNAME_2
# 1 Provincia  Province
# 2 Provincia  Province             Bongart
# 3 Provincia  Province
# Export
## Create a directory
dir.create("tempdir")
###### incidencia de Peru casos COVID19#####
library(ggplot2)
library(ggmap)
library(data.table)
library(maptools)
library(rgeos)
library(Cairo)
library(scales)
library(RColorBrewer)
library(rgdal)
library(sp)
library(plyr)
library(tmap)
library(dplyr)
setwd("~/covid19/")
## Call data
# shapefile de peru por regiones
shpfile_peru <- "data/gadm0-1-2-3/peru_1.shp"
sh_peru <- rgdal::readOGR(shpfile_peru)
# casos de covid
#caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200402_MD_clean.csv")
# caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200403_MD_clean.csv")
# caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200404_MD_clean.csv")
caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
# tabla de poblacion por regiones
pob_region <- read.csv("~/covid19/data/Poblacion por region.csv")
## Check the neighborhood shapefile data and plot
sh_peru@data$NAME_1
# Lima and Lima Province should be the same.
# Que quede solo una Lima
sh_peru$NAME_1 <- recode(sh_peru$NAME_1, `Lima Province` = "Lima")
unique(sh_peru$NAME_1)
sh_peru$NAME_1 <- factor(sh_peru$NAME_1)
levels(sh_peru@data$NAME_1)
# Change names
str(sh_peru@data)
levels(sh_peru$NAME_1) <- c(levels(sh_peru$NAME_1),
c("Apurimac", "Huanuco",
"Junin", "San Martin"))
sh_peru_df <- sh_peru@data
sh_peru[3,6] <- "Apurimac"
sh_peru[9,6] <- "Huanuco"
sh_peru[12,6] <- "Junin"
sh_peru[23,6] <- "San Martin"
sh_peru_df <- sh_peru@data
sh_peru@data$NAME_1 <- factor(sh_peru@data$NAME_1)
levels(sh_peru@data$NAME_1)
# [1] "Amazonas"      "Ancash"        "Arequipa"      "Ayacucho"
# [5] "Cajamarca"     "Callao"        "Cusco"         "Huancavelica"
# [9] "Ica"           "La Libertad"   "Lambayeque"    "Lima"
# [13] "Loreto"        "Madre de Dios" "Moquegua"      "Pasco"
# [17] "Piura"         "Puno"          "Tacna"         "Tumbes"
# [21] "Ucayali"       "Apurimac"      "Huanuco"       "Junin"
# [25] "San Martin"
## plotting shapefiles
plot(sh_peru)
# Transformar a mayusculas
sh_peru[[6]] <- toupper(sh_peru[[6]])
str(sh_peru@data$NAME_1)
unique(sh_peru@data$NAME_1)
# [1] "AMAZONAS"      "ANCASH"        "APURIMAC"      "AREQUIPA"
# [5] "AYACUCHO"      "CAJAMARCA"     "CALLAO"        "CUSCO"
# [9] "HUANUCO"       "HUANCAVELICA"  "ICA"           "JUNIN"
# [13] "LA LIBERTAD"   "LAMBAYEQUE"    "LIMA"          "LORETO"
# [17] "MADRE DE DIOS" "MOQUEGUA"      "PASCO"         "PIURA"
# [21] "PUNO"          "SAN MARTIN"    "TACNA"         "TUMBES"
# [25] "UCAYALI"
View(sh_peru_df)
plot(sh_peru[,14])
sh_peru[,14]
plot(sh_peru[.,14])
plot(sh_peru[14,])
plot(sh_peru[15,], add=T, col="red")
plot(sh_peru[15,])
plot(sh_peru[14,], add=T, col="red")
View(sh_peru_df)
plot(sh_peru[15,])
plot(sh_peru[16,], add=T, col="red")
plot(sh_peru[16,])
plot(sh_peru[16,])
plot(sh_peru[15,], add=T, col="red")
plot(sh_peru[16,], add=T, col="green")
plot(sh_peru[16,])
plot(sh_peru[15,], add=T, col="red")
plot(sh_peru[16,], add=T, col="green")
###### incidencia de Peru casos COVID19#####
library(ggplot2)
library(ggmap)
library(data.table)
library(maptools)
library(rgeos)
library(Cairo)
library(scales)
library(RColorBrewer)
library(rgdal)
library(sp)
library(plyr)
library(tmap)
library(dplyr)
setwd("~/covid19/")
## Call data
# shapefile de peru por regiones
shpfile_peru <- "data/gadm0-1-2-3/peru_1.shp"
sh_peru <- rgdal::readOGR(shpfile_peru)
# casos de covid
#caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200402_MD_clean.csv")
# caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200403_MD_clean.csv")
# caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200404_MD_clean.csv")
caso_covid <- fread("~/covid19/data/modificadas/covidPE_IND_20200405_CA_clean.csv")
# tabla de poblacion por regiones
pob_region <- read.csv("~/covid19/data/Poblacion por region.csv")
## Check the neighborhood shapefile data and plot
sh_peru@data$NAME_1
View(caso_covid)
